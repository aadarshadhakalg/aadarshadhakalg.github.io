<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<link rel="stylesheet" href="/_assets/main.css" />

    <title>Installing Ubuntu and Setup Cockpit - Notes by Aadarsha</title>
  <link rel="stylesheet" href="/_markdown_plugin_assets/highlight.js/atom-one-light.css" /></head>
  <body>
    <div class="main">
      <nav class="navigation">
        <a href="/">Notes by Aadarsha</a>
      </nav>
      <article>
        <header>
          <h1 class="article-title">Installing Ubuntu and Setup Cockpit</h1>
          <div class="article-info">
            <div>
              <span
                >Created At：<time datetime="1723526566951"
                  >2024-08-13 11:07</time
                ></span
              >
              <span
                >Updated At：<time datetime="1723542397242"
                  >2024-08-13 15:31</time
                ></span
              >
            </div>
            
          </div>
        </header>
        <div class="article-content markdown-body"><p>Installing Ubuntu and Setup Cockpit</p>
<ol>
<li>Configure Raid 1 using existing disk. ( Will clean up disks )</li>
<li>Install ubuntu</li>
<li>Create /etc/netplan/01-netcfg.yaml with following contents:</li>
</ol>
<div><pre class="hljs"><code><span class="hljs-symbol">network:</span>
<span class="hljs-symbol">        renderer:</span> NetworkManager <span class="hljs-comment">// Required by cockpit</span>
<span class="hljs-symbol">    ethernets:</span>
<span class="hljs-symbol">        eno1:</span>
<span class="hljs-symbol">            dhcp4:</span> false
<span class="hljs-symbol">            dhcp6:</span> false
<span class="hljs-symbol">            addresses:</span>
            - <span class="hljs-number">192.168</span><span class="hljs-number">.2</span><span class="hljs-number">.11</span>/<span class="hljs-number">28</span>
<span class="hljs-symbol">            routes:</span>
            - to: default
<span class="hljs-symbol">              via:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.2</span><span class="hljs-number">.1</span>
<span class="hljs-symbol">            nameservers:</span> 
<span class="hljs-symbol">             addresses:</span>
               - <span class="hljs-number">192.168</span><span class="hljs-number">.88</span><span class="hljs-number">.1</span>
               - <span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>
<span class="hljs-symbol">        eno2:</span>
<span class="hljs-symbol">            dhcp4:</span> false
            activation-mode: off <span class="hljs-comment">// disables port </span>
<span class="hljs-comment">// Because network manager online wait service was failing causing a longer boot time</span>
<span class="hljs-symbol">    version:</span> <span class="hljs-number">2</span></code></pre></div>
<p>Since we are using NetworkManager as a renderer, we can also disable networkd</p>
<div><pre class="hljs"><code>sudo systemctl <span class="hljs-built_in">disable</span> systemd-networkd.service
sudo systemctl <span class="hljs-built_in">disable</span> systemd-networkd.socket
sudo systemctl <span class="hljs-built_in">disable</span> networkd-dispatcher.service</code></pre></div>
<ol start="4">
<li>Install cockpit</li>
</ol>
<div><pre class="hljs"><code><span class="hljs-comment">sudo apt install cockpit </span>
<span class="hljs-comment">sudo apt install cockpit-machines libvirtd</span>
<span class="hljs-comment">sudo</span> <span class="hljs-comment">systemctl</span> <span class="hljs-comment">enable</span> <span class="hljs-comment">cockpit</span>
<span class="hljs-comment">sudo</span> <span class="hljs-comment">systemctl</span> <span class="hljs-comment">start</span> <span class="hljs-comment">cockpit</span></code></pre></div>
<p>Cockpit ony works with Network Manager as a render</p>
<ol start="5">
<li>Disable networkd-online-wait service / NetworkManager-wait-online.service was causing longer boot time<br />
<code>sudo systemctl disable systemd-networkd-wait-online.service</code><br />
<code>sudo systemctl disable NetworkManager-wait-online.service</code></li>
</ol>
<p><img src="/_resources/35f70d39952d45e792fc947ad60cf9da.png" /></p>
<p><a title="https://www.nixcraft.com/t/ubuntu-error-connection-activation-failed-connection-is-not-available-on-device-because-device-is-strictly-unmanaged/4533/2" href="https://www.nixcraft.com/t/ubuntu-error-connection-activation-failed-connection-is-not-available-on-device-because-device-is-strictly-unmanaged/4533/2">https://www.nixcraft.com/t/ubuntu-error-connection-activation-failed-connection-is-not-available-on-device-because-device-is-strictly-unmanaged/4533/2</a></p>
</div>
      </article>
    </div>
  </body>
</html>
